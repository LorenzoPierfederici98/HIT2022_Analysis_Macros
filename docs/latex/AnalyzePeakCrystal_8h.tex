\doxysection{/mnt/c/\+Users/\+Lorenzo/\+Desktop/\+HIT2022\+\_\+\+Analysis\+\_\+\+Macros/src/\+Analyze\+Peak\+Crystal.h File Reference}
\hypertarget{AnalyzePeakCrystal_8h}{}\label{AnalyzePeakCrystal_8h}\index{/mnt/c/Users/Lorenzo/Desktop/HIT2022\_Analysis\_Macros/src/AnalyzePeakCrystal.h@{/mnt/c/Users/Lorenzo/Desktop/HIT2022\_Analysis\_Macros/src/AnalyzePeakCrystal.h}}


Header file for Analyze\+Peak\+Crystal.\+cc.  


{\ttfamily \#include $<$TFile.\+h$>$}\newline
{\ttfamily \#include $<$TCanvas.\+h$>$}\newline
{\ttfamily \#include $<$TH1\+D.\+h$>$}\newline
{\ttfamily \#include $<$TFit\+Result\+Ptr.\+h$>$}\newline
{\ttfamily \#include $<$TF1.\+h$>$}\newline
{\ttfamily \#include $<$TLegend.\+h$>$}\newline
{\ttfamily \#include $<$TObj\+String.\+h$>$}\newline
{\ttfamily \#include $<$iostream$>$}\newline
{\ttfamily \#include $<$cmath$>$}\newline
{\ttfamily \#include $<$iomanip$>$}\newline
{\ttfamily \#include $<$TSpectrum.\+h$>$}\newline
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{AnalyzePeakCrystal_8h_a5aadeca6af3105a72d885dcc752237db}{Print\+Measurement}} (double value, double uncertainty)
\begin{DoxyCompactList}\small\item\em Prints the measurement value and its uncertainty. \end{DoxyCompactList}\item 
TFit\+Result\+Ptr \mbox{\hyperlink{AnalyzePeakCrystal_8h_a72e2657579c5be6f6e4d73d8be4b5ec8}{Fit\+Peak\+With\+TSpectrum}} (TH1D \texorpdfstring{$\ast$}{*}hist, int energy, int crystal\+\_\+\+ID)
\begin{DoxyCompactList}\small\item\em Fits a peak in the given histogram using TSpectrum and a Gaussian function. \end{DoxyCompactList}\item 
std\+::tuple$<$ TH1D \texorpdfstring{$\ast$}{*}, TH1D \texorpdfstring{$\ast$}{*} $>$ \mbox{\hyperlink{AnalyzePeakCrystal_8h_aee07cb059be4125e9378b6ec353e11a3}{Find\+Histograms}} (TFile \texorpdfstring{$\ast$}{*}in\+File, const TString \&hist\+Name\+\_\+total, const TString \&hist\+Name)
\begin{DoxyCompactList}\small\item\em Retrieves histograms for a specific crystal and the total charge from the input ROOT file. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{AnalyzePeakCrystal_8h_aec202f6e32bb23c6bb5ffe63a7d2e7df}{Save\+Fit\+Results\+To\+File}} (TCanvas \texorpdfstring{$\ast$}{*}canvas, TH1D \texorpdfstring{$\ast$}{*}hist, TFit\+Result\+Ptr fit\+Result, const TString \&output\+File\+Name)
\begin{DoxyCompactList}\small\item\em Saves the fit results, histograms, and plots to an output ROOT file. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Header file for Analyze\+Peak\+Crystal.\+cc. 

This file contains function declarations for analyzing and fitting charge histograms for calorimeter crystals. The charge histograms of every crystal (provided that it has enough statistics to display a peak) are fitted with a Gaussian function in a region surrounding the peak, found with TSpectrum. The fit results are saved in output files, along with the histograms and fit plots. 

\doxysubsection{Function Documentation}
\Hypertarget{AnalyzePeakCrystal_8h_aee07cb059be4125e9378b6ec353e11a3}\label{AnalyzePeakCrystal_8h_aee07cb059be4125e9378b6ec353e11a3} 
\index{AnalyzePeakCrystal.h@{AnalyzePeakCrystal.h}!FindHistograms@{FindHistograms}}
\index{FindHistograms@{FindHistograms}!AnalyzePeakCrystal.h@{AnalyzePeakCrystal.h}}
\doxysubsubsection{\texorpdfstring{FindHistograms()}{FindHistograms()}}
{\footnotesize\ttfamily std\+::tuple$<$ TH1D \texorpdfstring{$\ast$}{*}, TH1D \texorpdfstring{$\ast$}{*} $>$ Find\+Histograms (\begin{DoxyParamCaption}\item[{TFile \texorpdfstring{$\ast$}{*}}]{in\+File,  }\item[{const TString \&}]{hist\+Name\+\_\+total,  }\item[{const TString \&}]{hist\+Name }\end{DoxyParamCaption})}



Retrieves histograms for a specific crystal and the total charge from the input ROOT file. 

This function searches for and retrieves the specified histograms from the input file. It returns pointers to the crystal-\/specific histogram and the total charge histogram.


\begin{DoxyParams}{Parameters}
{\em in\+File} & Pointer to the input ROOT file. \\
\hline
{\em hist\+Name\+\_\+total} & Name of the total charge histogram. \\
\hline
{\em hist\+Name} & Name of the histogram for the specific crystal. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A tuple containing pointers to the crystal histogram and the total charge histogram. 
\end{DoxyReturn}
\Hypertarget{AnalyzePeakCrystal_8h_a72e2657579c5be6f6e4d73d8be4b5ec8}\label{AnalyzePeakCrystal_8h_a72e2657579c5be6f6e4d73d8be4b5ec8} 
\index{AnalyzePeakCrystal.h@{AnalyzePeakCrystal.h}!FitPeakWithTSpectrum@{FitPeakWithTSpectrum}}
\index{FitPeakWithTSpectrum@{FitPeakWithTSpectrum}!AnalyzePeakCrystal.h@{AnalyzePeakCrystal.h}}
\doxysubsubsection{\texorpdfstring{FitPeakWithTSpectrum()}{FitPeakWithTSpectrum()}}
{\footnotesize\ttfamily TFit\+Result\+Ptr Fit\+Peak\+With\+TSpectrum (\begin{DoxyParamCaption}\item[{TH1D \texorpdfstring{$\ast$}{*}}]{hist,  }\item[{int}]{energy,  }\item[{int}]{crystal\+\_\+\+ID }\end{DoxyParamCaption})}



Fits a peak in the given histogram using TSpectrum and a Gaussian function. 

This function detects peaks in the histogram using TSpectrum and fits the detected peak with a Gaussian function. The fit results are returned as a TFit\+Result\+Ptr.


\begin{DoxyParams}{Parameters}
{\em hist} & Pointer to the histogram to fit. \\
\hline
{\em energy} & Beam energy in Me\+V/u. \\
\hline
{\em crystal\+\_\+\+ID} & The ID of the crystal being analyzed. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
TFit\+Result\+Ptr containing the fit results. 
\end{DoxyReturn}
\Hypertarget{AnalyzePeakCrystal_8h_a5aadeca6af3105a72d885dcc752237db}\label{AnalyzePeakCrystal_8h_a5aadeca6af3105a72d885dcc752237db} 
\index{AnalyzePeakCrystal.h@{AnalyzePeakCrystal.h}!PrintMeasurement@{PrintMeasurement}}
\index{PrintMeasurement@{PrintMeasurement}!AnalyzePeakCrystal.h@{AnalyzePeakCrystal.h}}
\doxysubsubsection{\texorpdfstring{PrintMeasurement()}{PrintMeasurement()}}
{\footnotesize\ttfamily void Print\+Measurement (\begin{DoxyParamCaption}\item[{double}]{value,  }\item[{double}]{uncertainty }\end{DoxyParamCaption})}



Prints the measurement value and its uncertainty. 

This function formats and prints the peak position and its uncertainty with significant figures based on the uncertainty.


\begin{DoxyParams}{Parameters}
{\em value} & The measurement value (e.\+g., peak position). \\
\hline
{\em uncertainty} & The uncertainty in the measurement. \\
\hline
\end{DoxyParams}
\Hypertarget{AnalyzePeakCrystal_8h_aec202f6e32bb23c6bb5ffe63a7d2e7df}\label{AnalyzePeakCrystal_8h_aec202f6e32bb23c6bb5ffe63a7d2e7df} 
\index{AnalyzePeakCrystal.h@{AnalyzePeakCrystal.h}!SaveFitResultsToFile@{SaveFitResultsToFile}}
\index{SaveFitResultsToFile@{SaveFitResultsToFile}!AnalyzePeakCrystal.h@{AnalyzePeakCrystal.h}}
\doxysubsubsection{\texorpdfstring{SaveFitResultsToFile()}{SaveFitResultsToFile()}}
{\footnotesize\ttfamily void Save\+Fit\+Results\+To\+File (\begin{DoxyParamCaption}\item[{TCanvas \texorpdfstring{$\ast$}{*}}]{canvas,  }\item[{TH1D \texorpdfstring{$\ast$}{*}}]{hist,  }\item[{TFit\+Result\+Ptr}]{fit\+Result,  }\item[{const TString \&}]{output\+File\+Name }\end{DoxyParamCaption})}



Saves the fit results, histograms, and plots to an output ROOT file. 

This function writes the histogram, fit results, and canvas to the specified output file. It creates the output file if it does not exist or updates it if it does.


\begin{DoxyParams}{Parameters}
{\em canvas} & Pointer to the canvas containing the fit plot. \\
\hline
{\em hist} & Pointer to the histogram being analyzed. \\
\hline
{\em fit\+Result} & The fit results to save. \\
\hline
{\em output\+File\+Name} & Name of the output ROOT file. \\
\hline
\end{DoxyParams}
