<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>HIT 2022 Analysis: /mnt/c/Users/Lorenzo/Desktop/HIT2022_Analysis_Macros/src/CalibrateFragm.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="FOOT_logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">HIT 2022 Analysis
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('CalibrateFragm_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">CalibrateFragm.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Header file for the charge-energy calibration.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;TFile.h&gt;</code><br />
<code>#include &lt;TKey.h&gt;</code><br />
<code>#include &lt;TDirectory.h&gt;</code><br />
<code>#include &lt;TH1.h&gt;</code><br />
<code>#include &lt;TF1.h&gt;</code><br />
<code>#include &lt;TGraphErrors.h&gt;</code><br />
<code>#include &lt;TCanvas.h&gt;</code><br />
<code>#include &lt;TNamed.h&gt;</code><br />
<code>#include &lt;iostream&gt;</code><br />
<code>#include &lt;vector&gt;</code><br />
<code>#include &lt;map&gt;</code><br />
<code>#include &lt;regex&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for CalibrateFragm.h:</div>
<div class="dyncontent">
<div class="center"><img src="CalibrateFragm_8h__incl.png" border="0" usemap="#a_2mnt_2c_2Users_2Lorenzo_2Desktop_2HIT2022__Analysis__Macros_2src_2CalibrateFragm_8h" alt=""/></div>
<map name="a_2mnt_2c_2Users_2Lorenzo_2Desktop_2HIT2022__Analysis__Macros_2src_2CalibrateFragm_8h" id="a_2mnt_2c_2Users_2Lorenzo_2Desktop_2HIT2022__Analysis__Macros_2src_2CalibrateFragm_8h">
<area shape="rect" title="Header file for the charge&#45;energy calibration." alt="" coords="492,5,707,60"/>
<area shape="rect" title=" " alt="" coords="5,108,71,133"/>
<area shape="poly" title=" " alt="" coords="492,49,306,74,85,111,84,105,305,68,491,44"/>
<area shape="rect" title=" " alt="" coords="95,108,159,133"/>
<area shape="poly" title=" " alt="" coords="492,53,345,77,173,111,172,105,344,72,491,48"/>
<area shape="rect" title=" " alt="" coords="184,108,284,133"/>
<area shape="poly" title=" " alt="" coords="492,62,296,108,295,102,491,57"/>
<area shape="rect" title=" " alt="" coords="308,108,368,133"/>
<area shape="poly" title=" " alt="" coords="520,63,382,108,381,103,519,58"/>
<area shape="rect" title=" " alt="" coords="393,108,451,133"/>
<area shape="poly" title=" " alt="" coords="546,62,459,104,457,100,544,58"/>
<area shape="rect" title=" " alt="" coords="476,108,595,133"/>
<area shape="poly" title=" " alt="" coords="582,62,554,99,550,95,578,58"/>
<area shape="rect" title=" " alt="" coords="619,108,708,133"/>
<area shape="poly" title=" " alt="" coords="621,58,649,95,644,99,617,62"/>
<area shape="rect" title=" " alt="" coords="732,108,821,133"/>
<area shape="poly" title=" " alt="" coords="655,58,742,100,739,104,652,62"/>
<area shape="rect" title=" " alt="" coords="846,108,926,133"/>
<area shape="poly" title=" " alt="" coords="688,58,835,102,834,107,686,63"/>
<area shape="rect" title=" " alt="" coords="951,108,1013,133"/>
<area shape="poly" title=" " alt="" coords="707,54,938,105,937,111,706,59"/>
<area shape="rect" title=" " alt="" coords="1038,108,1089,133"/>
<area shape="poly" title=" " alt="" coords="707,46,854,70,1025,105,1024,111,853,76,707,52"/>
<area shape="rect" title=" " alt="" coords="1113,108,1171,133"/>
<area shape="poly" title=" " alt="" coords="707,43,887,68,1099,105,1099,111,886,73,707,49"/>
</map>
</div>
</div>
<p><a href="CalibrateFragm_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:acdc0930628c2b53e29747f1b28afa1cb" id="r_acdc0930628c2b53e29747f1b28afa1cb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="CalibrateFragm_8h.html#acdc0930628c2b53e29747f1b28afa1cb">ProcessFile</a> (const TString &amp;fileName, int energy, std::map&lt; TString, std::map&lt; int, double &gt; &gt; &amp;fitMeansP, std::map&lt; TString, std::map&lt; int, double &gt; &gt; &amp;fitMeansHe, std::map&lt; TString, std::map&lt; int, double &gt; &gt; &amp;fitErrorsP, std::map&lt; TString, std::map&lt; int, double &gt; &gt; &amp;fitErrorsHe)</td></tr>
<tr class="memdesc:acdc0930628c2b53e29747f1b28afa1cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Processes a ROOT file to extract fit results for protons and helium.  <br /></td></tr>
<tr class="separator:acdc0930628c2b53e29747f1b28afa1cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e0c3be0d7ea9ae813950b6af2c1e174" id="r_a2e0c3be0d7ea9ae813950b6af2c1e174"><td class="memItemLeft" align="right" valign="top">std::map&lt; TString, double &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="CalibrateFragm_8h.html#a2e0c3be0d7ea9ae813950b6af2c1e174">PlotFitResultsCombined</a> (const std::map&lt; TString, std::map&lt; int, double &gt; &gt; &amp;fitMeansP, const std::map&lt; TString, std::map&lt; int, double &gt; &gt; &amp;fitErrorsP, const std::map&lt; TString, std::map&lt; int, double &gt; &gt; &amp;fitMeansHe, const std::map&lt; TString, std::map&lt; int, double &gt; &gt; &amp;fitErrorsHe, const std::map&lt; int, double &gt; &amp;elossP, const std::map&lt; int, double &gt; &amp;elossHe)</td></tr>
<tr class="memdesc:a2e0c3be0d7ea9ae813950b6af2c1e174"><td class="mdescLeft">&#160;</td><td class="mdescRight">Plots the combined fit results for protons and helium.  <br /></td></tr>
<tr class="separator:a2e0c3be0d7ea9ae813950b6af2c1e174"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a661388630a24bdf651364f968813ec3c" id="r_a661388630a24bdf651364f968813ec3c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="CalibrateFragm_8h.html#a661388630a24bdf651364f968813ec3c">WriteFitValuesOrdered</a> (const std::map&lt; TString, double &gt; &amp;fitValues)</td></tr>
<tr class="memdesc:a661388630a24bdf651364f968813ec3c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes the fit values to a configuration file.  <br /></td></tr>
<tr class="separator:a661388630a24bdf651364f968813ec3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4907eeeea5fe95544ce97afbb74d65d" id="r_ab4907eeeea5fe95544ce97afbb74d65d"><td class="memItemLeft" align="right" valign="top">pair&lt; std::string, std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="CalibrateFragm_8h.html#ab4907eeeea5fe95544ce97afbb74d65d">RoundMeasurement</a> (double value, double uncertainty)</td></tr>
<tr class="memdesc:ab4907eeeea5fe95544ce97afbb74d65d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rounds a measurement value and its uncertainty.  <br /></td></tr>
<tr class="separator:ab4907eeeea5fe95544ce97afbb74d65d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Header file for the charge-energy calibration. </p>
<p>Macro that plots the fit results on protons and helium peaks given by the AnalyzeTWFragm.cc macro vs the energies loss values retrieved from MC (2 energy loss values per bar and beam energy, given by the AnalyzeTWMC.cc macro). The fit charge values vs energy loss values are fitted with a 1 parameter linear function; the imverse of these parameters (one per bar) are written in the configuration file. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a2e0c3be0d7ea9ae813950b6af2c1e174" name="a2e0c3be0d7ea9ae813950b6af2c1e174"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e0c3be0d7ea9ae813950b6af2c1e174">&#9670;&#160;</a></span>PlotFitResultsCombined()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt; TString, double &gt; PlotFitResultsCombined </td>
          <td>(</td>
          <td class="paramtype">const std::map&lt; TString, std::map&lt; int, double &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>fitMeansP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::map&lt; TString, std::map&lt; int, double &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>fitErrorsP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::map&lt; TString, std::map&lt; int, double &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>fitMeansHe</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::map&lt; TString, std::map&lt; int, double &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>fitErrorsHe</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::map&lt; int, double &gt; &amp;&#160;</td>
          <td class="paramname"><em>elossP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::map&lt; int, double &gt; &amp;&#160;</td>
          <td class="paramname"><em>elossHe</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Plots the combined fit results for protons and helium. </p>
<p>This function plots the combined fit results for protons and helium. It creates graphs for the fit results and performs a combined fit with a linear function. The fit values are stored in a map and returned.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fitMeansP</td><td>A map containing the mean fit values for protons. </td></tr>
    <tr><td class="paramname">fitErrorsP</td><td>A map containing the fit errors for protons. </td></tr>
    <tr><td class="paramname">fitMeansHe</td><td>A map containing the mean fit values for helium. </td></tr>
    <tr><td class="paramname">fitErrorsHe</td><td>A map containing the fit errors for helium. </td></tr>
    <tr><td class="paramname">elossP</td><td>A map containing the energy loss values for protons. </td></tr>
    <tr><td class="paramname">elossHe</td><td>A map containing the energy loss values for helium. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A map containing the fit values for each layer-bar combination. </dd></dl>

</div>
</div>
<a id="acdc0930628c2b53e29747f1b28afa1cb" name="acdc0930628c2b53e29747f1b28afa1cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acdc0930628c2b53e29747f1b28afa1cb">&#9670;&#160;</a></span>ProcessFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ProcessFile </td>
          <td>(</td>
          <td class="paramtype">const TString &amp;&#160;</td>
          <td class="paramname"><em>fileName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>energy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; TString, std::map&lt; int, double &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>fitMeansP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; TString, std::map&lt; int, double &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>fitMeansHe</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; TString, std::map&lt; int, double &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>fitErrorsP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; TString, std::map&lt; int, double &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>fitErrorsHe</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Processes a ROOT file to extract fit results for protons and helium. </p>
<p>This function processes a ROOT file containing fit results for protons and helium. It extracts the mean and error values for each fit and stores them in the provided maps.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fileName</td><td>The name of the ROOT file to process. </td></tr>
    <tr><td class="paramname">energy</td><td>The energy value associated with the file. </td></tr>
    <tr><td class="paramname">fitMeansP</td><td>A map to store the mean fit values for protons. </td></tr>
    <tr><td class="paramname">fitMeansHe</td><td>A map to store the mean fit values for helium. </td></tr>
    <tr><td class="paramname">fitErrorsP</td><td>A map to store the fit errors for protons. </td></tr>
    <tr><td class="paramname">fitErrorsHe</td><td>A map to store the fit errors for helium. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab4907eeeea5fe95544ce97afbb74d65d" name="ab4907eeeea5fe95544ce97afbb74d65d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4907eeeea5fe95544ce97afbb74d65d">&#9670;&#160;</a></span>RoundMeasurement()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pair&lt; std::string, std::string &gt; RoundMeasurement </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>uncertainty</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Rounds a measurement value and its uncertainty. </p>
<p>This function rounds a measurement value and its uncertainty to the appropriate number of significant figures. The uncertainty is rounded to 1 significant figure.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">value</td><td>The measurement value. </td></tr>
    <tr><td class="paramname">uncertainty</td><td>The uncertainty of the measurement. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pair of strings containing the rounded value and uncertainty. </dd></dl>

</div>
</div>
<a id="a661388630a24bdf651364f968813ec3c" name="a661388630a24bdf651364f968813ec3c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a661388630a24bdf651364f968813ec3c">&#9670;&#160;</a></span>WriteFitValuesOrdered()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WriteFitValuesOrdered </td>
          <td>(</td>
          <td class="paramtype">const std::map&lt; TString, double &gt; &amp;&#160;</td>
          <td class="paramname"><em>fitValues</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes the fit values to a configuration file. </p>
<p>This function writes the fit values to a configuration file. The fit values are sorted by bar ID and written to the file in a specific format.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fitValues</td><td>A map containing the fit values for each layer-bar combination. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="CalibrateFragm_8h.html">CalibrateFragm.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
